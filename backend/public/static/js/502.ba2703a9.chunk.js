"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[502],{502:(e,t,r)=>{r.r(t),r.d(t,{default:()=>x});var c=r(43),s=r(119),n=r(579);function o(e){let{currProject:t,setCurrProject:r,update:o,field:a}=e;const[l,d]=(0,c.useState)(!1),i=t[a],j=["widget","project-".concat(a,"-widget"),l?"input-active":""],u=(0,c.useRef)(null),p=e=>{const t=e.currentTarget.value,r={};return r[a]=t,r};return(0,n.jsxs)("div",{className:j.join(" "),"data-field":a,onDoubleClick:()=>{u.current&&(d(!0),u.current.focus(),window.addEventListener("keydown",(e=>{"Enter"===e.key&&(d(!1),u.current.blur())})))},children:[(0,n.jsx)(s.A,{content:"Edit ".concat(a),children:(0,n.jsx)("div",{className:"label",title:a,children:(0,n.jsx)("span",{children:i})})}),(0,n.jsx)("textarea",{defaultValue:i,"aria-label":"Change project title",type:"text",onFocus:()=>{d(!0)},onBlur:e=>{const c=p(e),s={...t,...c};o(s),r(s),d(!1)},ref:u})]})}var a=r(867),l=r(800);function d(e){let{project:t,projectActions:r}=e;const[s,d]=(0,c.useState)(t),{title:i,description:j,wordcount:u,targetWordcount:p}=s,{remove:x,add:h,update:m}=r,v=u>=p,f=l.i.getPercentage(u,p);return(0,n.jsxs)("article",{className:"project-preview",children:[(0,n.jsx)("ul",{children:["title","description"].map(((e,t)=>(0,n.jsx)("li",{children:(0,n.jsx)(o,{currProject:s,setCurrProject:d,update:m,field:e})},t)))}),(0,n.jsxs)("div",{className:"project-progress",children:[(0,n.jsx)("div",{className:"progress-bar-wrapper",children:(0,n.jsxs)(a.A,{className:"progress-bar",value:f,children:[f,"%"]})}),(0,n.jsxs)("p",{className:"progress-text ".concat(v?"completed":""),children:[(0,n.jsx)("span",{className:"wordcount",children:u})," / ",(0,n.jsx)("span",{className:"target",children:p})," words"]})]})]})}function i(e){let{projects:t,projectActions:r}=e;const{remove:c,add:s,update:o}=r;return(0,n.jsx)("ul",{className:"project-list",children:t.map((e=>(0,n.jsxs)("li",{children:[(0,n.jsx)(d,{project:e,projectActions:r}),(0,n.jsx)("div",{className:"project-actions",children:(0,n.jsx)("button",{className:"remove-project",onClick:()=>c(e._id),children:"remove"})})]},e._id)))})}var j=r(3),u=r(14),p=r(92);function x(){const e=(0,j.d4)(u.en),t=(0,j.wA)();(0,c.useEffect)((()=>{t((0,u.RT)())}),[]);const r={remove:e=>{t((0,u.oE)(e))},add:e=>{let r=p.$.getEmptyProject();t((0,u.By)(r))},update:e=>{t((0,u.vr)(e))}};return(0,n.jsxs)("section",{className:"project-index",children:[(0,n.jsx)("h2",{children:"project index"}),(0,n.jsx)("button",{className:"add-project",onClick:r.add,children:"Add project"}),(0,n.jsx)(i,{projects:e,projectActions:r})]})}}}]);
//# sourceMappingURL=502.ba2703a9.chunk.js.map